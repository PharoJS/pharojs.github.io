<!DOCTYPE html>
<html>
<head>
  <title>FAQ | PharoJS</title>
<style>
div.answer{display:none}
li.show>div.answer{display:block;font-size:85%}
ul.openClose>li.show{list-style-image: url('img/open.png')}
ul.openClose>li{list-style-image: url('img/closed.png');
font-size:150%}
</style>
</head>

  <body>
    <script type="text/javascript"
            src="https://pharojs.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/-3szkjr/b/c/ced29afba244973b16a7e99d069f29b8/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-US&collectorId=59e53daf"></script>
	<center><a href="http://pharojs.org"><img src="img/pharoJsLogo.png" alt="PharoJS Logo"></a></center>
  	<h1>Frequently Asked Questions</h1>

<h2>General Questions</h2>
<ul class="openClose">
  <li>Where can I find the PharoJS documentation?
  <div class="answer">
    The PharoJS documentation is <a href="doc.html">available at this linked page</a>. It includes (but not restricted to) conference papers and slides of talks presenting different facets of PharoJS.
  </div>
  </li>

  <li>How do I install PharoJS?
  <div class="answer">
    <p>Install can be done inside a <a title="Download Pharo" href="http://pharo.org/download" target="_blank">Pharo 5 image</a> by evaluating the following in a playground:
    <br><br><pre>
    Gofer it
    smalltalkhubUser: 'noury' project: 'PharoJS';
    configurationOf: #PharoJS ;
    loadBleedingEdge.
    </pre>

    This will install the most recent public version. To install the latest stable version, please use <code>loadStable</code> instead of <code>loadBleedingEdge</code>.</p>
    
    Upon install, Pharo will download HTML code for examples. The are located in the <code>PharoJS-master</code> foloder along with the image and the change file. It contains subfolders for each example and test.</p>
  </div>
  </li>

  <li>Does PharoJS work with Pharo6?
  <div class="answer">
    Pharo6 had some stability issues, so we elected to skip Pharo 6.
    PharoJS will be available on Pharo 7 shortly after it is available.
  </div>
  </li>

  <!-- <li>Is there a PharoJS pre-builtImage?
  <div class="answer">
  </div>
  </li> -->

  <li>Where can I find the HTML code for App tests (e.g. PjCounterApp and PjMinimalApp)?
  <div class="answer">
    Some tests require a folder with HTML + CSS + ... files. They can be found in the PharoJS Git repository: <a href="https://github.com/bouraqadi/PharoJS">https://github.com/bouraqadi/PharoJS</a>.
  </div>
  </li>

  <li>Where can I download the ESUG 2016 Demo (Pharo 4 image + Web App + PhoneGap App)?
  <div class="answer">
    A ready to use Pharo 4 image with the demo from <a href="doc.html#esug2016Talk">the ESUG 2016 talk</a>. The zip file  includes the files (e.g. HTML) for the web app and for the PhoneGap mobile application [<a href="https://docs.google.com/uc?id=0B7fN7OYplsLmcG9Cb3pDcWVYS00&export=download" target="_blank">ZIP approx. 85 MB</a>]
  </div>
  </li>

  <li>Are there any PharoJS goodies (Shirts, Mugs...)?
  <div class="answer">
    Different PharoJS goodies are available. Please click on the picture below.
    <center><a href="http://www.zazzle.com/collections/pharojs-119096008034094659" target="_blank"><img src="img/swag.jpg"></a></center>
  </div>
  </li>

</ul>

<h2>PharoJS code questions</h2>
<ul class="openClose">
  <li>How can I create a <code>KeyboardEvent</code> or <code>MouseEvent</code>?
  <div class="answer">
    <pre>
    window KeyboardEvent new: #keypress with: { #key -> #Enter. #keyCode -> 13. #which -> 13 } asDictionary
    window MouseEvent new: #click
    </pre>
  </div>
  </li>

  <li>How can I create a DOM object?
  <div class="answer">
    <pre>
	rectangle := document createElement: 'div'.
	rectangle id: 'grn'.
	document body appendChild: rectangle.
    </pre>
  </div>
  </li>

  <li>How do I reference a field in a native Javascript object? Call a method?
  <div class="answer">
    <p>
    In most cases, simply treating it as a message send works.
    <pre>
	jsobj fieldName.             " equivalent to jsobj.fieldName "
	jsobj fileName: 0.           " equivalent to jsobj.fieldName=0 "
    </pre>
    You do exactly the same to send a message
    <pre>
	jsobj methodName.            " equivalent to jsobj.methodName() "
	jsobj methodName: 0.         " equivalent to jsobj.methodName(0) "
	jsobj methodName: 0 foo: 42. " equivalent to jsobj.methodName(0,42) "
	jsobj methodName: 0 bar: 42. " equivalent to jsobj.methodName(0,42) "
    </pre>
    Notice that the message name for multiple parameters is only matched to the first parameter, so the last 2 examples are functionally identical.
    </p>
    <p>
    If the field is a method (function) then simply referencing it will call it, so you must use:
    <pre>
	jsobj instVarNamed:#count.
	jsobj instVarNamed:#count put: 0.
    </pre>
    You can also use this to force creation of a slot.
    </p>
  </div>
  </li>
  
</ul>

<h2>Dealing with errors</h2>
<ul class="openClose">
  <li>PharoJS tests and playground raise on Safari error: <code>SecurityError (DOM Exception 18): The operation is insecure</code>
  <div class="answer">
    <p>This error prevents running PharoJS tests with Safari as a default browser. This problem also arises when opening a PharoJS playground on a app (e.g. `PjCounterBrowserApp`).</p>
    
    <p>The cause of the bug is that currently, we open HTML files from the disk. This works fine with Firefox and Chrome. But, <a href="https://stackoverflow.com/questions/24997292/localstorage-access-from-local-file">Safari's new security system forbids accessing JS global `localStorage` when the HTML or the JS code is loaded from <code>file://</code></a></p>
    
    <p>Luckily, there is a workaround. First, ensure you have the <a href="https://developer.apple.com/safari/tools/">Safari developer tools installed</a>. Then, in the `Develop` menu check the "Disable local file restrictions"  item.</p>
    
    <p>This is needed only during development. Once your app is ready for production, you export the code and make available on a server. You should not experience the issue.</p>
    
    <p>Don't forget that PharoJS allows building HTML apps. Thus, if you require accessing sensitive resources, you are likely to have to define a <a href="https://content-security-policy.com/">content security policy</a> in your HTML file using the <code>meta</code> tag. You can find some examples in <a href="https://stackoverflow.com/questions/30280370/how-does-content-security-policy-work">the Stack overflow response addressing this question</a></p>
  </div>
  </li>


</ul>

<script>
Array.slice(document.getElementsByClassName("answer")).forEach(function(div) {
var node=div.parentNode;
console.log(node);
node.addEventListener('click',function(){node.classList.toggle('show');})})
</script>
</body>
</html>
